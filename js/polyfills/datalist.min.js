!function(a,b,c,d){"use strict";var e="wb-datalist",f="input[list]",g=e+"-inited",h="wb-init."+e,i="setfocus.wb",j=!1,k="aria-activedescendent",l="aria-expanded",m="aria-hidden",n=d.doc,o=function(b){var e,h,i,l,m,n,o,p,q,r=b.target,s=r.id;if(b.currentTarget===r&&-1===r.className.indexOf(g)){for(d.remove(f),r.className+=" "+g,e=a(r),h="<ul role='listbox' id='wb-al-"+r.id+"' class='wb-al hide' aria-hidden='true' aria-live='polite'></ul>",i=c.getElementById(r.getAttribute("list")),l=i.getElementsByTagName("option"),m=l.length,r.setAttribute("autocomplete","off"),r.setAttribute("role","textbox"),r.setAttribute("aria-haspopup","true"),r.setAttribute("aria-autocomplete","list"),r.setAttribute("aria-owns","wb-al-"+s),r.setAttribute(k,""),h+="<ul id='wb-al-"+r.id+"-src' class='wb-al-src hide' aria-hidden='true'>",q=0;q!==m;q+=1)n=l[q],o=n.getAttribute("value"),p=n.getAttribute("label"),o||(o=n.innerHTML),h+="<li id='al-opt-"+s+"-"+q+"'><a href='javascript:;' tabindex='-1'><span class='al-val'>"+(o?o:"")+"</span><span class='al-lbl'>"+(p&&p!==o?p:"")+"</span></a></li>";e.after(h+"</ul>"),j=!0}},p=function(b,c){var d,e=a(b.nextSibling),f=e.next().children().clone();c&&0!==c.length&&(d=c.toLowerCase(),f=f.filter(function(){var b=a(this),c=b.find("span.al-val").html();return 0===c.length&&(c=b.find("span.al-lbl").html()),0===d.length||-1!==c.toLowerCase().indexOf(d)})),e.empty().append(f),0!==f.length?(r(b),e.removeClass("hide").attr(m,"false"),b.setAttribute(l,"true")):(e.addClass("hide").attr(m,"true"),b.setAttribute(l,"false"))},q=function(a){var b=a.nextSibling;b.className+=" hide",b.innerHTML="",b.setAttribute(m,"true"),a.setAttribute(l,"false"),a.setAttribute(k,"")},r=function(b){var c=a(b),d=c.next();d.css({width:c.outerWidth(),left:c.position().left})},s=function(b,c){var d,e,f,g,h=c.target,j=h.nextSibling,l=-1!==j.className.indexOf("hide");if(32===b||b>47&&91>b||b>95&&112>b||b>159&&177>b||b>187&&223>b)c.altKey||p(h,h.value+String.fromCharCode(b));else if(8!==b||c.altKey){if((38===b||40===b)&&""===h.getAttribute(k))return l&&p(h),d=j.getElementsByTagName("a"),e=d[38===b?d.length-1:0],h.setAttribute(k,e.parentNode.getAttribute("id")),a(e).trigger(i),!1;l||(9===b||27===b||27===b&&!c.altKey)&&q(h)}else f=h.value,g=f.length,0!==g&&p(h,f.substring(0,g-1))},t=function(b,c){var d,e,f,g,h,j=c.parentNode.parentNode,l=j.previousSibling,m=a(l);return 32===b||b>47&&91>b||b>95&&112>b||b>159&&177>b||b>187&&223>b?(l.value+=String.fromCharCode(b),m.trigger(i),p(l,l.value),!1):8===b?(f=l.value,g=f.length,0!==g&&(l.value=f.substring(0,g-1),p(l,l.value)),m.trigger(i),!1):13===b?(d=c.getElementsByTagName("span"),f=d[0].innerHTML,0===f.length&&(f=d[1].innerHTML),l.value=f,m.trigger(i),q(l),!1):9===b||27===b?(m.trigger(i),q(l),!1):38===b||40===b?(38===b?(e=c.parentNode.previousSibling,e||(h=j.getElementsByTagName("li"),e=h[h.length-1])):(e=c.parentNode.nextSibling,e||(e=j.getElementsByTagName("li")[0])),e=e.getElementsByTagName("a")[0],l.setAttribute(k,e.parentNode.getAttribute("id")),a(e).trigger(i),!1):void 0},u=function(b){var c=b.nodeName.toLowerCase(),d="a"===c?b:b.parentNode,e=d.parentNode.parentNode,f=e.previousSibling,g=a(f),h=d.getElementsByTagName("span"),j=h[0].innerHTML;return 0===j.length&&(j=h[1].innerHTML),f.value=j,g.trigger(i),q(f),!1};n.on("timerpoke.wb "+h+" keydown click vclick touchstart",f,function(a){var b=a.target,c=a.type,d=a.which;switch(c){case"timerpoke":case"wb-init":o(a);break;case"keydown":if(!a.ctrlKey&&!a.metaKey)return s(d,a);break;case"click":case"vclick":case"touchstart":if(!d||1===d)return-1===b.nextSibling.className.indexOf("hide")?q(b):p(b,b.value),!1}return!0}),n.on("keydown click vclick touchstart",".wb-al a, .wb-al span",function(a){var b=a.target,c=a.type,d=a.which;switch(c){case"keydown":if(!a.ctrlKey&&!a.metaKey)return t(d,b);break;case"click":case"vclick":case"touchstart":if(!d||1===d)return u(b)}}),n.on("focusin txt-rsz.wb win-rsz-width.wb win-rsz-height.wb",function(b){var c,d,e,g,h,i="focusin"===b.type,k=b.target,l=k?k.id:null;if(j)for(c=n.find(f).get(),h=c.length,g=0;g!==h;g+=1)d=c[g],i?(e=d.nextSibling,-1!==e.className.indexOf("hide")||l===d.id||l===e.id||a.contains(e,k)||q(d)):r(d)}),d.add(f)}(jQuery,window,document,wb);