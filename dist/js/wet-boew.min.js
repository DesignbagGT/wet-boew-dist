/*! Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 - v4.0.0-a1-development - 2013-10-11
*/
!function(a,b,c,d){"use strict";var e,f={"default":"wet-boew"};e={init:function(b){return a.extend(f,b||{})},show:function(b){var c=a(this);c.each(function(){var c;c=a(this),c.attr("aria-hidden","false"),b===d&&c.removeClass("wb-invisible")})},hide:function(b){a(this).each(function(){var c;return c=a(this),c.attr("aria-hidden","true"),b===d?c.addClass("wb-invisible"):void 0})},toggle:function(b,c){a(this).addClass(b).removeClass(c)}},a.fn.wb=function(b){e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?a.error("Method "+b+" does not exist on jquery.wb"):e.init.apply(this,arguments)}}(jQuery,window,document),function(a){"use strict";function b(b,d,e){var f,g,h,i=b.nodeName.toLowerCase();return"area"===i?(f=b.parentNode,g=f.name,b.href&&g&&"map"===f.nodeName.toLowerCase()?(h=a("img[usemap=#"+g+"]")[0],!!h&&c(h)):!1):e?(/input|select|textarea|button|object/.test(i)?!b.disabled:"a"===i?b.href||d:d)&&c(b):/input|select|textarea|button|object/.test(i)?!b.disabled:"a"===i?b.href||d:d}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},discoverable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}})}(jQuery),function(a,b,c){"use strict";var d=function(){var a="{{",b="}}",d="[a-z0-9_$][\\.a-z0-9_]*",e=new RegExp(a+"\\s*("+d+")\\s*"+b,"gi");return function(a,b){return a.replace(e,function(a,d){for(var e=d.split("."),f=e.length,g=b,h=0;f>h;h++){if(g=g[e[h]],g===c)throw"tim: '"+e[h]+"' not found in "+a;if(h===f-1)return g}})}}();b.tmpl=d}(jQuery,window),function(a,b,c,d,f){"use strict";var g,h,i,j,k,l,m,n,o,p,q,r,t,u;return g=a(c),j=".wet-boew-multimedia, .wb-multimedia",i=0,k=!1,h=c.documentElement.lang,m=function(a){var b,c,d,e,f;for(e=function(a,b){return Array(Math.max(b-String(a).length+1,0)).join(0)+a},f="",a=Math.floor(a),c=2;c>=0;)d=Math.pow(60,c),b=Math.floor(a/d),""!==f&&(f+=":"),f+=e(b,2),a-=d*b,c-=1;return f},q=function(a){var b,c,d,e,g;if(d=0,a!==f){if("s"===a.charAt(a.length-1))return parseFloat(a.substring(0,a.length-1));for(c=a.split(":").reverse(),b=0,g=c.length;g>b;)e=0===b?parseFloat(c[b]):parseInt(c[b],10),d+=e*Math.pow(60,b),b+=1;return d}return-1},l=function(b,c){var d,e,g;return g=a(b),d=g.data("properties"),c!==f?(e=d.player,[g,d,e]):[g,g.data("properties")]},p=function(b){var c,d,e;return d=".wet-boew-tt",e=b.find(d),c=[],e.each(function(){var b,d,e,g,h;return e=a(this),b=-1,g=-1,e.attr("data-begin")!==f?(b=q(e.attr("data-begin")),g=e.attr("data-end")!==f?q(e.attr("data-end")):q(e.attr("data-dur"))+b):e.attr("data")!==f&&(h=e.attr("data"),h=h.replace(/(begin|dur|end)/g,'"$1"').replace(/'/g,'"'),h=a.parseJSON(h),b=q(h.begin),g=void 0!==h.end?q(h.end):q(h.dur)+b),d=d.clone(),d.find(s).detach(),c[c.length]={text:d.html(),begin:b,end:g}}),c},r=function(b){var c,d,g;return d="[begin]",g=b.find(d),c=[],g.each(function(){var b,g,h;return g=a(this),b=-1,h=-1,b=q(g.attr("begin")),h=g.attr("end")!==f?q(g.attr("end")):q(g.attr("dur"))+b,g=e.clone(),g.find(d).detach(),c[c.length]={text:g.html(),begin:b,end:h}}),c},n=function(b,c){return a.ajax({url:c,context:evtmgr,dataType:"html",dataFilter:function(a){return a.replace(/<img [^>]*>/g,"")},success:function(c){var d;return d={type:"captionsloaded.mediaplayer.wb"},d.captions=c.indexOf("<html")>-1?p(a(c)):r(a(c)),a(b).trigger(d)},error:function(c,d,e){return a(b).trigger({type:"captionsloadfailed.mediaplayer.wb",error:e})}})},o=function(b,c){var d;return d={type:"captionsloaded.mediaplayer.wb",captions:p(c)},a(b).trigger(d)},u=function(b,c,d){var e,f,g,h;for(b.empty(),f=0,g=d.length,h=[];g>f;)e=d[f],c>=e.begin&&c<=e.end&&b.append(a("<div>"+e.text+"</div>")),h.push(f+=1);return h},t=function(b,c){var d,e,f,g;switch(b){case"play":try{return this.object.play()}catch(h){return e=h,this.object.doPlay()}break;case"pause":try{return this.object.pause()}catch(h){return e=h,this.object.doPause()}break;case"getCaptionsVisible":return d=a(this),d.find(".wb-mm-captionsarea").is(":visible");case"setCaptionsVisible":return d=a(this),c?d.find(".wb-mm-captionsarea").show():d.find(".wb-mm-captionsarea").hide(),d.trigger("captionsvisiblechange.mediaplayer.wb");case"setPreviousTime":return this.object.previousTime=c;case"setBuffering":return this.object.buffering=c;default:if(g=b.substr(0,3),f=b.substr(3),f=f.substr(0,1).toLowerCase()+f.substr(1),"get"===g)return"function"!=typeof this.object[f]?this.object[f]:this.object[f]();if("set"===g)return"function"!=typeof this.object[f]?this.object[f]=c:this.object[b](c)}},g.on("timerpoke.wb",j,function(){return b._timer.remove(j),k?void 0:(k=!0,g.trigger({type:"ajax-fetch.wb",element:a(j),fetch:""+d.getPath("/assets")+"/mediacontrol-"+h+".txt"}))}),g.on("ajax-fetched.wb",j,function(b){var c,d;return d=a(this),c=b.pointer.html(),d.data("template",c),d.trigger({type:"init.mediaplayer.wb"})}),g.on("init.mediaplayer.wb",j,function(){var b,c,d,e,g,h,j,k,l;return h=a(this),d=h.attr("id")!==f?h.attr("id"):"wb-mediaplayer-"+i++,g=h.children("audio, video").eq(0),e=g.attr("id")!==f?g.attr("id"):""+d+"-media",j=g.is("video")?"video":"audio",k="video"===j?g.attr("width"):"0",c="video"===j?g.attr("height"):"0",b=g.children("track[kind='captions']")?g.children("track[kind='captions']").attr("src"):f,l={id:d,media:g,m_id:e,type:j,height:c,width:k,object:""},g.attr("id")===f&&g.attr("id",e),h.data("properties",l),null===g.get(0).error&&""!==g.get(0).currentSrc&&g.get(0).currentSrc!==f?h.trigger(""+j+".mediaplayer.wb"):h.trigger("fallback.mediaplayer.wb")}),g.on("fallback.mediaplayer.wb",j,function(){var a,b,c,e;return e=l(this),c=e[0],a=e[1],a.flashvars="id="+a.id,b=d.getPath("/assets")+"/multimedia.swf?"+a.flashvars,a.poster="","video"===a.type?(a.poster='<img src="'+a.media.attr("poster")+'" class="img-responsive" height="'+a.height+'" width="'+a.width+'" alt="'+a.media.attr("title")+'"/>',a.flashvars="&height="+a.media.height()+"&width="+a.media.width()+"&posterimg="+encodeURI(d.getUrlParts(a.media.attr("poster")).absolute)+"&media="+encodeURI(d.getUrlParts(a.media.find("source").filter('[type="video/mp4"]').attr("src")).absolute)):a.flashvars="&media="+encodeURI(d.getUrlParts(a.media.find("source").filter("[type='audio/mp3']").attr("src")).absolute),a.sObject='<object id="'+a.m_id+'" width="'+a.width+'" height="'+a.height+'" class="'+a.type+'" type="application/x-shockwave-flash" data="'+b+'" tabindex="-1"><param name="movie" value="'+b+'"/><param name="flashvars" value="'+a.flashvars+'"/><param name="allowScriptAccess" value="always"/><param name="bgcolor" value="#000000"/><param name="wmode" value="opaque"/>'+a.poster+"</object>",c.data("properties",a),c.trigger("wb.mediaplayer.renderui")}),g.on("video.mediaplayer.wb",j,function(){var a,b,c;return c=l(this),b=c[0],a=c[1],a.sObject=a.media.wrap("<div />").parent().html(),a.poster='<img src="'+a.media.attr("poster")+'" class="img-responsive" height="'+a.height+'" width="'+a.width+'" alt="'+a.media.attr("title")+'"/>',b.data("properties",a),b.trigger("renderui.mediaplayer.wb")}),g.on("audio.mediaplayer.wb",j,function(){var a,b,c;return c=l(this),b=c[0],a=c[1],c}),g.on("renderui.mediaplayer.wb",j,function(){var b,c,d,e;return e=l(this),d=e[0],b=e[1],d.html(tmpl(d.data("template"),b)),c=a("#"+b.m_id),b.player=c.is("object")?c.children(":first-child"):c.load(),b.player.on("durationchange play pause ended volumechange timeupdate captionsloaded captionsloadfailed captionsvisiblechange waiting canplay progress",function(a){return d.trigger(a)}),this.object=c.get(0),this.player=t,d.data("properties",b)}),g.on("click",j,function(b){var c,d,e;return c=a(b.target),2===b.which||3===b.which?!1:((c.hasClass("playpause")||c.is("object")||c.hasClass("wb-mm-overlay"))&&(this.player("getPaused")===!0?this.player("play"):this.player("pause")),c.hasClass("cc")&&this.player("setCaptionsVisible",!this.player("getCaptionsVisible")),c.hasClass("mute")&&this.player("setMuted",!this.player("getMuted")),(c.is("progress")||c.hasClass("wb-progress-inner")||c.hasClass("wb-progress-outer"))&&(d=(b.pageX-c.offset().left)/c.width(),this.player("setCurrentTime",this.player("getDuration")*d)),(c.hasClass("rewind")||c.hasClass("fastforward"))&&(e=.05*this.player("getDuration"),c.hasClass("rewind")&&(e*=-1),this.player("setCurrentTime",this.player("getCurrentTime")+e)),!0)}),g.on("keydown",j,function(a){var b,c,d,e;return e=l(this),c=e[0],b=e[1],d=0,32!==a.which&&13!==a.which||a.target!==this.player?37===a.keyCode?(c.find(".wb-mm-controls .rewind").click(),!1):39===a.keyCode?(c.find(".wb-mm-controls .fastforward").click(),!1):38===a.keyCode?(d=Math.round(10*this.player.getVolume())/10+.1,d=1>d?d:1,$player.setVolume(d),!1):40===a.keyCode?(d=Math.round(10*this.player.getVolume())/10-.1,d=d>0?d:0,this.player.setVolume(d),!1):!0:(c.find(".wb-mm-controls .playpause").click(),!1)}),g.on("durationchange play pause ended volumechange timeupdate captionsloaded captionsloadfailed captionsvisiblechange waiting canplay progress",j,function(b){var c,d,e,h;switch(c=a(this),b.type){case"play":this.player("play"),d=c.find(".playpause .glyphicon"),d.removeClass("glyphicon-play").addClass("glyphicon-pause").end().attr("title",d.data("state-off")),c.find(".wb-mm-overlay img").css("visibility","hidden"),c.find(".progress").addClass("active");break;case"pause":this.player("pause"),d=c.find(".playpause .glyphicon"),d.removeClass("glyphicon-pause").addClass("glyphicon-play").end().attr("title",d.data("state-on")),c.find(".progress").removeClass("active");break;case"ended":d=c.find(".playpause .glyphicon"),d.removeClass("glyphicon-pause").addClass("glyphicon-play").end().attr("title",d.data("state-on")),c.find(".wb-mm-overlay").css("visibility","show");break;case"volumechange":d=c.find(".mute .glyphicon"),this.player("getMuted")?d.removeClass("glyphicon-volume-up").addClass("glyphicon-volume-off").end().attr("title",d.data("state-on")):d.removeClass("glyphicon-volume-off").addClass("glyphicon-volume-up").end().attr("title",d.data("state-off"));break;case"timeupdate":e=Math.round(1e3*(this.player("getCurrentTime")/this.player("getDuration")))/10,h=c.find("progress"),h.attr("value",e),c.find(".wb-mm-timeline-current span:not(.wb-invisible)").text(m(this.player("getCurrentTime"))),a.data(b.target,"captions")!==f&&u(c.find(".wb-mm-captionsarea"),this.player("getCurrentTime"),a.data(b.target,"captions"));break;case"captionsloaded":a.data(b.target,"captions",b.captions);break;case"captionsloadfailed":c.find(".wb-mm-captionsarea").append("<p>ERROR: WB0342</p>");break;case"captionsvisiblechange":d=c.find(".cc .glyphicon"),this.player("getCaptionsVisible")?d.attr("title",d.data("state-on")).css("opacity","1"):d.attr("title",d.data("state-off")).css("opacity",".5")}return g.on("loadcaptions.mediaplayer.wb",j,function(){var a,b,c;return c=l(this),b=c[0],a=c[1],c})}),b._timer.add(j)}(jQuery,window,document,vapour,void 0),function(a,b){"use strict";a.ajaxSettings.cache=!1;var c=b.doc,d=function(a){var b,c,d,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",f=a,g="",h=0;for(h;h!==f;h+=1)b=Math.floor(2*Math.random()),0===b?(c=Math.floor(9*Math.random()),g+=c):(d=Math.floor(Math.random()*e.length),g+=e.substring(d,d+1));return g};c.on("ajax-fetch.wb",function(b){var c=b.element,e=b.fetch,f="wb"+d(8);a("<div id='"+f+"' />").load(e,function(){a(c).trigger({type:"ajax-fetched.wb",pointer:a(this)})})})}(jQuery,vapour),function(a,b,c){"use strict";var d=".wb-carousel",e=c.doc,f=d+" .prv, "+d+" .nxt, "+d+" .plypause",g=function(a){var b,c,d=a.attr("data-delay");return d?a.hasClass("stopped")?!1:(b=parseFloat(d),c=parseFloat(a.attr("data-ctime"))+.5,c>b&&(a.trigger("shift.wb-carousel"),c=0),a.attr("data-ctime",c),void 0):(a.trigger("init.wb-carousel"),!1)},h=function(a){var b=6;a.hasClass("slow")?b=9:a.hasClass("fast")&&(b=3),a.find(".item:not(.in)").addClass("out"),a.attr({"data-delay":b,"data-ctime":0})},i=function(a,b){var c=a.find(".item"),d=c.length,e=a.find(".item.in").prevAll(".item").length,f=b.shiftto?b.shiftto:1,g=e>d?0:e+f;g=g>d-1||0>g?0:g,c.eq(e).removeClass("in").addClass("out"),c.eq(g).removeClass("out").addClass("in")},j=function(a,b){a.trigger("shift.wb-carousel",{shiftto:b})};e.on("timerpoke.wb init.wb-carousel shift.wb-carousel",d,function(b){var c=b.type,d=a(this);switch(c){case"timerpoke":g(d);break;case"init":h(d);break;case"shift":i(d,b)}return!0}),e.on("click",f,function(b){b.preventDefault();var c=a(this),d=c.parents(".wb-carousel"),e=c.attr("class");switch(e){case"prv":j(c,1);break;case"nxt":j(c,-1);break;default:d.toggleClass("stopped")}return d.attr("data-ctime",0),!0}),b._timer.add(".wb-carousel")}(jQuery,window,vapour),function(a,b,c){"use strict";a.ajaxSettings.cache=!1;var d="[data-ajax-after]",e=c.doc,f=function(a){var c=a.data("ajax-after");b._timer.remove(d),e.trigger({type:"ajax-fetch.wb",element:a,fetch:c})};e.on("timerpoke.wb ajax-fetched.wb",d,function(b){var c=b.type,d=a(this);switch(c){case"timerpoke":f(d);break;case"ajax-fetched":d.after(b.pointer.html()).trigger("ajax-after-loaded.wb")}return!0}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c){"use strict";a.ajaxSettings.cache=!1;var d="[data-ajax-append]",e=c.doc,f=function(a){var c=a.data("ajax-append");b._timer.remove(d),e.trigger({type:"ajax-fetch.wb",element:a,fetch:c})};e.on("timerpoke.wb ajax-fetched.wb",d,function(b){var c=b.type,d=a(this);switch(c){case"timerpoke":f(d);break;case"ajax-fetched":d.append(b.pointer.html()).trigger("ajax-append-loaded.wb")}return!0}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c){"use strict";a.ajaxSettings.cache=!1;var d="[data-ajax-before]",e=c.doc,f=function(a){var c=a.data("ajax-before");b._timer.remove(d),e.trigger({type:"ajax-fetch.wb",element:a,fetch:c})};e.on("timerpoke.wb ajax-fetched.wb",d,function(b){var c=b.type,d=a(this);switch(c){case"timerpoke":f(d);break;case"ajax-fetched":d.before(b.pointer.html()).trigger("ajax-before-loaded.wb")}return!0}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c){"use strict";var d=".wb-inview",e=c.doc,f=c.win,g=function(a){b._timer.remove(d),a.trigger("scroll.wb-inview")},h=function(a){var b=c.win,d=a.outerWidth(),e=a.outerHeight(),f=b.height(),g=b.scrollTop(),h=b.scrollLeft(),i=h+d,j=g+f,k=a.offset().left,l=k+d,m=a.offset().top,n=m+e,o=a.find(".pg-banner, .pg-panel").attr({role:"toolbar","aria-hidden":"true"});m>j||g>n||k>i||i>l?o.removeClass("in").addClass("out").wb("hide",!0):o.removeClass("out").addClass("in").wb("show",!0)};e.on("timerpoke.wb scroll.wb-inview",d,function(b){var c=b.type,d=a(this);switch(c){case"timerpoke":g(d);break;case"scroll":h(d)}return!0}),f.on("scroll scrollstop",function(){a(d).trigger("scroll.wb-inview")}),e.on("text-resize.wb window-resize-width.wb window-resize-height.wb",function(){a(d).trigger("scroll.wb-inview")}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c){"use strict";var d="[data-picture]",e=c.doc,f=function(a){b._timer.remove(d),a.trigger("picturefill.wb-data-picture")},g=function(a){var c,d,f,g,h=[],i=a.getElementsByTagName("img")[0],j=a.getElementsByTagName("span");for(c=0,d=j.length;c!==d;c+=1)g=j[c].getAttribute("data-media"),(!g||b.Modernizr.mq(g))&&h.push(j[c]);0!==h.length?(f=h.pop(),i||(i=e[0].createElement("img"),i.alt=a.getAttribute("data-alt")),i.src=f.getAttribute("data-src"),f.appendChild(i)):i&&i.parentNode.removeChild(i)};e.on("timerpoke.wb picturefill.wb-data-picture",d,function(b){var c=b.type,d=this,e=a(this);switch(c){case"timerpoke":f(e);break;case"picturefill":g(d)}}),e.on("text-resize.wb window-resize-width.wb window-resize-height.wb",function(){a(d).trigger("picturefill.wb-data-picture")}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c){"use strict";a.ajaxSettings.cache=!1;var d="[data-ajax-replace]",e=c.doc,f=function(a){var c=a.data("ajax-replace");b._timer.remove(d),e.trigger({type:"ajax-fetch.wb",element:a,fetch:c}),a.load(c,function(){a.removeAttr("data-ajax-replace").trigger("ajax-replace-loaded.wb")})};e.on("timerpoke.wb ajax-fetched.wb",d,function(b){var c=b.type,d=a(this);switch(c){case"timerpoke":f(d);break;case"ajax-fetched":d.removeAttr("data-ajax-replace").trigger("ajax-replace-loaded.wb")}return!0}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c){"use strict";var d=".wb-equalheight",e=c.doc,f=function(){b._timer.remove(d),g()},g=function(){var b,c,e=a(d),f=e.children(),g=[],i=-1,j=-1,k=-1,l=-1;for(c=f.length-1;c>=0;c--)b=f[c],b.style.verticalAlign="top",j=b.offsetTop,k=b.offsetHeight,j!==i?(h(g,l),i=j,l=k):l=k>l?k:l,g.push(b);0!==g.length&&h(g,l)},h=function(a,b){for(var c=a.length-1;c>=0;c--)a[c].style.height=b+"px";a.length=0};e.on("timerpoke.wb",d,f),e.on("text-resize.wb window-resize-width.wb window-resize-height.wb",g),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c){"use strict";var d="link[rel='shortcut icon']",e=c.doc,f={filename:"favicon-mobile.png",path:null,rel:"apple-touch-icon",sizes:"57x57 72x72 114x114 144x144 150x150"},g=function(c){var e=a.extend({},f,c.data());b._timer.remove(d),c.trigger("mobile.wb-favicon",e)},h=function(b,c,d){var e,f=a("link[rel^='apple']"),g=0!==f.length;g||(f=a("<link rel='"+d.rel+"' sizes='"+d.sizes+"' class='wb-favicon'>")),f.hasClass("wb-favicon")&&(e=null!==d.path?d.path:j(b.getAttribute("href")),f.attr("href",e+d.filename),g||b.parentNode.insertBefore(f[0],b))},i=function(a,b,c){var d=null!==c.path?c.path:j(a.getAttribute("href"));a.setAttribute("href",d+c.filename)},j=function(a){return a.substring(0,a.lastIndexOf("/")+1)};e.on("timerpoke.wb mobile.wb-favicon icon.wb-favicon",d,function(b,c){switch(b.type){case"timerpoke":g(a(this));break;case"mobile":h(this,b,c);break;case"icon":i(this,b,c)}return!0}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m=".wb-feedback",n=d.doc,o=function(){var n=a(m),o=n.find("#feedback"),q=c.referrer,r=d.pageUrlParts.params;e=o[0],f=c.getElementById("access"),g=c.getElementById("contact1"),h=c.getElementById("contact2"),i=n.find("#web"),j=i.find("#mobile"),k=i.find("#computer"),l=n.find("#info"),b._timer.remove(m),!r.submit&&r.feedback&&o.find("option[value='"+r.feedback+"']").attr("selected","selected"),e.setAttribute("aria-controls","web"),f.setAttribute("aria-controls","mobile computer"),p(e),p(f),p(g),p(h),c.getElementById("page").setAttribute("value",q)},p=function(a){var b,d,e=a.id;switch(e){case"feedback":"web"===a.value?b=i:d=i;break;case"access":"mobile"===a.value?(b=j,d=k):(b=k,d=j);break;case"contact1":case"contact2":c.getElementById("contact1").checked||c.getElementById("contact2").checked?b=l:d=l}b&&b.attr("aria-hidden","false").show("slow"),d&&d.attr("aria-hidden","true").hide("slow")};n.on("timerpoke.wb",m,o),n.on("keydown click","#feedback, #access, #contact1, #contact2",function(a){var b=a.which;2!==b&&3!==b&&p(a.currentTarget)}),n.on("click",m+" input[type=reset]",function(a){var b=a.which;2!==b&&3!==b&&(p(e),p(f),p(g),p(h))}),b._timer.add(m)}(jQuery,window,document,vapour),function(a,b){"use strict";var c=b.doc,d=function(b){setTimeout(function(){return a(b.target).focus()},0)};c.on("focus.wb",d)}(jQuery,vapour),function(a,b,c){"use strict";var d=".wb-footnotes",e=c.doc,f=function(a,c){var e,f,g,h,i,j,k=a.getElementsByTagName("dd"),l=a.getElementsByTagName("dt");for(b._timer.remove(d),f=k.length,e=0;e!==f;e+=1)g=k[e],h=l[e],i=g.id+"-dt",g.setAttribute("tabindex","-1"),g.setAttribute("aria-labelledby",i),h.id=i;j=c.find("dd p.footnote-return a span span").remove()};e.on("timerpoke.wb",d,function(){return f(this,a(this)),!0}),e.on("click vclick","main :not(.wb-footnotes) sup a.footnote-link",function(a){var b,d,f=a.which;return f&&1!==f?void 0:(b="#"+c.jqEscape(this.getAttribute("href").substring(1)),d=e.find(b),d.find("p.footnote-return a").attr("href","#"+this.parentNode.id),d.trigger("focus.wb"),!1)}),e.on("click.wb-footnotes vclick.wb-footnotes",d+" dd p.footnote-return a",function(a){var b,d=a.which;return d&&1!==d?void 0:(b="#"+c.jqEscape(this.getAttribute("href").substring(1)),e.find(b+" a").trigger("focus.wb"),!1)}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c,d){"use strict";var e,f,g=".wb-formvalid",h=d.doc,i=function(c){var i=d.getMode()+".js";f||(e=b.i18n,f={colon:e("%colon"),hyphen:e("%hyphen"),error:e("%error"),errorFound:e("%error-found"),errorsFound:e("%errors-found"),formNotSubmitted:e("%form-not-submitted")}),b.Modernizr.load({both:["site!deps/jquery.validate"+i,"site!deps/additional-methods"+i],complete:function(){var b,e,i,j,k=c.find("form"),l=k.get(0),m=k.attr("id"),n=l.getElementsByTagName("label"),o=n.length,p=k.find("input, select, textarea"),q=p.filter("input"),r=q.filter("[pattern]"),s=!1,t=k.find("[required]").attr("aria-required","true"),u="errors-"+(m?m:"default"),v=a("<div class='arialive wb-invisible' aria-live='polite' aria-relevant='all'></div>");for(c.append(v),e=o,b=0;b!==e;b+=1)n[b].innerHTML+=" ";for(e=r.length,b=0;b!==e;b+=1)r.eq(b).removeAttr("pattern");if(d.ieVersion>0&&d.ieVersion<9){for(e=t.length,t.removeAttr("required"),b=0;b!==e;b+=1)t[b].setAttribute("data-rule-required","true");q.filter("[type=date]").each(function(){var b=a(this),c=b.wrap("<div/>").parent(),d=a(c.html().replace("type=date","type=text"));c.replaceWith(d)}),p=k.find("input, select, textarea")}j=k.validate({meta:"validate",focusInvalid:!1,errorElement:"strong",errorPlacement:function(a,b){var c,d,e=b.attr("type");return a.data("element-id",b.attr("id")),!e||(e=e.toLowerCase(),"radio"!==e&&"checkbox"!==e||(c=b.closest("fieldset"),0===c.length||(d=c.find("legend").first(),0===d.length||1===c.find("input[name="+b.attr("name")+"]"))))?(a.appendTo(k.find("label[for="+b.attr("id")+"]")),void 0):(a.appendTo(d),void 0)},showErrors:function(b){this.defaultShowErrors();var c,d,e,g,h,j,l,m,n=f,o=k.find("strong.error").filter(":not(:hidden)"),p=k.find("input.error, select.error, textarea.error"),q=k.find("#"+u),r="<span class='prefix'>"+n.error+"&#160;",t=n.colon+" </span>",w=n.hyphen;if(k.find("[aria-invalid=true]").removeAttr("aria-invalid"),0!==o.length){for(0===q.length?q=a("<div id='"+u+"' class='errorContainer' tabindex='-1'/>").prependTo(k):q.empty(),c="<p>"+n.formNotSubmitted+o.length+(1!==o.length?n.errorsFound:n.errorFound)+"</p><ul>",p.attr("aria-invalid","true"),g=o.length,e=0;e!==g;e+=1)h=o.eq(e),j=r+(e+1)+t,l=h.closest("label").find(".field-name"),0===l.length&&(m=h.closest("fieldset"),0!==m.length&&(l=m.find("legend .field-name"))),h.find("span.prefix").detach(),c+="<li><a href='#"+h.data("element-id")+"'>"+j+(0!==l.length?l.html()+w:"")+h[0].innerHTML+"</a></li>",h.prepend(j);if(c+="</ul>",q.append(c),s)q.trigger("focus.wb");else{e=0;for(d in b)if(b.hasOwnProperty(d)){e+=1;break}0!==e?(i=o.filter("[for="+d+"]")[0].innerHTML,i!==v.html()&&v.html(i)):0!==v.html().length&&v.empty()}s=!1}else 0!==v.html().length&&v.empty(),q.detach()},invalidHandler:function(){s=!0}}),h.on("click vclick touchstart",g+" input[type=reset]",function(a){var b,c=a.button;c&&1!==c||(j.resetForm(),b=k.find("#"+u),b.length>0&&b.empty(),k.find("[aria-invalid=true]").removeAttr("aria-invalid"),0!==v.html().length&&v.empty())})}})};h.on("timerpoke.wb",g,function(){return i(a(this)),!0}),h.on("click vclick",g+" .errorContainer a",function(c){var d,e,f,g,h,i=c.which;return i&&1!==i?void 0:(d=this.href.substring(this.href.indexOf("#")),e=a(d),f=e.prev(),g=0===f.length?e.closest("fieldset").find("legend"):[],h=0!==f.length?f.offset().top:0!==g.length?g.offset().top:-1,e.trigger("focus.wb"),-1!==h&&b.scroll(0,h),!1)}),b._timer.add(g)}(jQuery,window,document,vapour),function(a,b,c){"use strict";var d,e,f=".wb-lightbox",g=c.doc,h=!1,i=function(g){var i=c.getMode()+".js";b._timer.remove(f),e||(d=b.i18n,e={tClose:d("%close-esc"),tLoading:d("%loading"),gallery:{tPrev:d("%previous-left"),tNext:d("%next-right"),tCounter:d("%lb-current40")},image:{tError:d("%lb-img-error")+' (<a href="%url%">)'},ajax:{tError:d("%lb-xhr-error")+' (<a href="%url%">)'}}),b.Modernizr.load({load:"site!deps/jquery.magnific-popup"+i,complete:function(){var b,c={};h||(a.extend(!0,a.magnificPopup.defaults,e),h=!0),c.callbacks={open:function(){var a,b=this.content,c=b.parent().parent();"image"===this.type?(c.attr({role:"dialog","aria-live":"polite","aria-labelledby":"lb-title"}),b.find(".mfp-bottom-bar").attr("id","lb-title")):(a=b.find(".modal-title"),0!==a.length&&(a.attr("id","lb-title"),c.attr("aria-labelledby","lb-title")))},markupParse:function(a,b,c){var d,e,f,g=c.el;"image"===c.type&&(d=g.find("img"),e=c.img.attr("alt",b.title),f=d.attr("aria-describedby"),f&&e.attr("aria-describedby",f),f=d.attr("longdesc"),f&&e.attr("longdesc",f))}},"a"!==g[0].nodeName.toLowerCase()?(c.delegate="a",c.type="image",(g.hasClass("lb-gallery")||g.hasClass("lb-hidden-gallery"))&&(c.gallery={enabled:!0}),g.magnificPopup(c)):(b=g.children(),c.type=0!==b.length&&"img"===b[0].nodeName.toLowerCase()?"image":"#"===g.attr("href").slice(0,1)?"inline":g.hasClass("lb-iframe")?"iframe":"ajax",g.magnificPopup(c))}})};g.on("timerpoke.wb",f,function(){return i(a(this)),!0}),b._timer.add(f)}(jQuery,window,vapour),function(a,b,c){"use strict";var d=".wb-menu",e=c.doc,f=function(b,c){var d=a(b),e=d.hasClass("wb-menu")?d.data():d.parents(".wb-menu").first().data(),f=c?e.items.has(b):e.items;return[e.self,e.menu,f,d]},g=function(a){var b=a.find(".menu :focusable"),c=a.find(".item");a.has("[data-post-remove]")&&a.removeClass(a.data("post-remove")).removeAttr("data-post-remove"),a.find(":discoverable").attr("tabindex","-1").eq(0).attr("tabindex","0"),b.filter("[href^='#']").append("<span class='expandicon'></span>"),a.data({self:a,menu:b,items:c})},h=function(a){a.goto.trigger("focus.wb")},i=function(a,b){var c=b.cnode,d=b.current+b.increment,e=d;d>=c.length?e=0:0>d&&(e=c.length-1),a.trigger({type:"select.wb-menu","goto":c.eq(e)})},j=function(a){a.find(".open").removeClass("open"),a.find(".active").removeClass("active")},k=function(a,b){a.trigger({type:"reset.wb-menu"}),a.find(".menu [href='"+b.ident+"']").addClass("active"),a.find(b.ident).addClass("open")},l=function(a){var b=f(a.target),c=b[1],d=b[3];c.trigger("reset.wb-menu"),d.find(".expandicon").length>0&&c.trigger({type:"display.wb-menu",ident:d.attr("href")})};e.on("ajax-replace-loaded.wb mouseleave focusout select.wb-menu increment.wb-menu reset.wb-menu display.wb-menu",d,function(b){var c=b.type,d=a(this);switch(c){case"ajax-replace-loaded":return b.stopPropagation(),g(d),!1;case"mouseleave":case"focusout":d.trigger("reset.wb-menu");break;case"select":b.stopPropagation(),h(b);break;case"increment":b.stopPropagation(),i(d,b);break;case"reset":b.stopPropagation(),j(d);break;case"display":b.stopPropagation(),k(d,b)}return!0}),e.on("mouseover focusin",d+" .menu :focusable",function(a){a.stopPropagation(),l(a)}),e.on("keydown",d+" .menu",function(a){a.stopPropagation();var b,c,d=f(a.target),e=d[0],g=d[1],h=d[2],i=d[3],j=a.which,k=g.index(i.get(0));switch(j){case 13:case 40:i.find(".expandicon").length>0&&(a.preventDefault(),b=i.attr("href").slice(1),c=h.filter("[id='"+b+"']").find(":discoverable").first(),e.trigger({type:"display.wb-menu",ident:i.attr("href")}).trigger({type:"select.wb-menu","goto":c}));break;case 9:e.trigger({type:"reset.wb-menu"});break;case 37:a.preventDefault(),e.trigger({type:"increment.wb-menu",cnode:g,increment:-1,current:k});break;case 39:a.preventDefault(),e.trigger({type:"increment.wb-menu",cnode:g,increment:1,current:k})}}),e.on("keydown",d+" .item",function(a){a.stopPropagation();var b,c=f(a.target,!0),d=c[0],e=c[1],g=c[2],h=c[3],i=a.which,j=g.find(":focusable"),k=j.index(h.get(0));switch(i){case 27:case 37:a.preventDefault(),b=e.filter("[href='#"+g.attr("id")+"']"),d.trigger({type:"select.wb-menu","goto":b});break;case 38:a.preventDefault(),d.trigger({type:"increment.wb-menu",cnode:j,increment:-1,current:k});break;case 40:a.preventDefault(),d.trigger({type:"increment.wb-menu",cnode:j,increment:1,current:k})}})}(jQuery,window,vapour),function(a,b,c){"use strict";var d,e,f=c.doc,g="wb-navcurrent",h=function(a,c){var f,h,i,j,k,l,m,n,o,p,q,r=a.target.getElementsByTagName("a"),s=[],t=[],u=b.location,v=u.hostname+u.pathname.replace(/^([^\/])/,"/$1"),w=u.search,x=!1,y=r.length;for(f=0;f!==y;f+=1)if(i=r[f],j=i.getAttribute("href"),null!==j&&0!==j.length&&"#"!==j.slice(0,1)){if(k=i.hostname+i.pathname.replace(/^([^\/])/,"/$1"),m=i.search,n=m.length,v.slice(-k.length)===k&&(0===n||w.slice(-n)===m)){x=!0;break}s.push(i),t.push(k)}if(!x&&c){if(p)p=d,q=e;else{for(p=[],q=[],o=(c.jquery?c:c[0]).getElementsByTagName("a"),y=o.length,f=0;f!==y;f+=1)i=o[f],j=i.getAttribute("href"),0!==j.length&&"#"!==j.slice(0,1)&&(p.push(i),q.push(i.hostname+i.pathname.replace(/^([^\/])/,"/$1")));d=p,e=q}for(y=s.length,f=0;f!==y;f+=1){for(i=s[f],k=t[f],l=k.length,m=i.search,n=m.length,h=p.length-1,h=p.length-1;-1!==h;h-=1)if(q[h].slice(-l)===k&&(0===n||p[h].search.slice(-n)===m)){x=!0;break}if(x)break}}x&&(i.className+=" "+g)};f.on("navcurrent.wb",h)}(jQuery,window,vapour),function(a,b,c){"use strict";var d=".wb-prettify",e=c.doc,f={linenums:!1,allpre:!1},g=function(){var g,h,i,j=a(this),k=j.attr("class").split(" "),l=c.getMode()+".js",m=["site!deps/prettify"+l],n=a.extend({},f,j.data());for(b._timer.remove(d),g=0,h=k.length;g!==h;g+=1)0===k[g].indexOf("lang-")&&m.push("site!deps/"+k[g]+l);n.allpre=n.allpre||j.hasClass("all-pre"),n.linenums=n.linenums||j.hasClass("linenums"),(n.allpre||n.linenums)&&(i=e.find("pre"),n.allpre&&i.addClass("prettyprint"),n.linenums&&i.filter(".prettyprint").addClass("linenums")),b.Modernizr.load({load:m,complete:function(){e.trigger("prettyprint.wb-prettify")}})},h=function(){"function"==typeof b.prettyPrint&&b.prettyPrint()};e.on("timerpoke.wb",d,g).on("prettyprint.wb-prettify",h),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c,d){"use strict";var e,f,g="wb-resize-test",h="#"+g,i=d.win,j=d.doc,k=[],l=["text-resize.wb","window-resize-width.wb","window-resize-height.wb"],m=function(){var a=c.createElement("span");a.innerHTML="&#160;",a.setAttribute("id",g),c.body.appendChild(a),f=a,k=[a.offsetHeight,i.width(),i.height()],e=l.join(" ")},n=function(){var a,b=[f.offsetHeight,i.width(),i.height()],c=b.length;for(a=0;a!==c;a+=1)b[a]!==k[a]&&j.trigger(l[a],b);k=b};m(),j.on("timerpoke.wb",h,n),b._timer.add(h)}(jQuery,window,document,vapour),function(a,b,c,d){"use strict";var e,f,g=".wb-session-timeout",h=d.doc,i={inactivity:12e5,reactionTime:18e4,sessionalive:12e5,refreshCallbackUrl:null,logouturl:"./",refreshOnClick:!0,refreshLimit:2e5},j=function(c){var h=a(c.target),j=a.extend({},i,h.data("wet-boew"));b._timer.remove(g),f||(e=b.i18n,f={buttonContinue:e("%st-button-continue"),buttonEnd:e("%st-button-end"),buttonSignin:e("%tmpl-signin"),timeout:e("%st-timeout-msg"),timeoutTitle:e("%st-msgbox-title"),timeoutAlready:e("%st-already-timeout-msg")}),b.Modernizr.load({load:"site!deps/jquery.magnific-popup"+d.getMode()+".js",complete:function(){h.trigger("reset.wb-session-timeout",j),k(h,j)}})},k=function(a,b){b.refreshOnClick&&h.on("click",function(){var c=a.data("lastActivity"),d=s();(!c||d-c>b.refreshLimit)&&a.trigger("reset.wb-session-timeout",b).trigger("keepalive.wb-session-timeout",b),a.data("lastActivity",d)})},l=function(b,c){var d,e,g=a(b.target);null!==c.refreshCallbackUrl&&a.post(c.refreshCallbackUrl,function(b){b&&"true"===b.replace(/\s/g,"")?g.trigger("reset.wb-session-timeout",c):(d=a("<button type='button' class='wb-session-timeout-confirm btn btn-primary'>"+f.buttonSignin+"</button>"),d.data("logouturl",c.logouturl),e=q({content:"<p>"+f.timeoutAlready+"</p>",buttons:d}),clearTimeout(g.data("inactivity.wb-session-timeout")),clearTimeout(g.data("keepalive.wb-session-timeout")),setTimeout(function(){h.trigger("modal.wb-session-timeout",{mainClass:"mfp-zoom-in",items:{src:e,type:"inline"}})
},Modernizr.csstransitions?500:0))})},m=function(b,c){var d,e,g,i=h[0].activeElement,j=u(c.reactionTime),k=f.timeout.replace("#min#","<span class='min'>"+j.minutes+"</span>").replace("#sec#","<span class='sec'>"+j.seconds+"</span>"),l=a("#wb-session-modal");0===l.length?(d=a("<button type='button' class='wb-session-timeout-confirm btn btn-primary'>"+f.buttonContinue+"</button>"),e=a("<button type='button' class='wb-session-timeout-confirm btn btn-default'>"+f.buttonEnd+"</button>"),l=q({id:"#wb-session-modal",title:f.timeoutTitle,content:"<p class='content'>"+k+"</p>",buttons:[d,e]}),h.find("body").append(l)):(d=l.find(".btn-primary"),e=l.find(".btn-default"),l.find(".content").text(k)),e.data("logouturl",c.logouturl),d.data(c).data("start",s()),h.trigger("modal.wb-session-timeout",{mainClass:"mfp-zoom-in",removalDelay:Modernizr.csstransitions?500:0,items:{src:l,type:"inline"},callbacks:{open:function(){var a=l.find(".min"),b=l.find(".sec");g=setInterval(function(){v(a,b)&&(clearInterval(g),l.find(".content").text(f.timeoutAlready),d.text(f.buttonSignin),e.hide())},1e3)},afterClose:function(){clearInterval(g),a(i).trigger("focus.wb")}}})},n=function(b,c){var d=a(b.target);r(d,"inactivity.wb-session-timeout",c.inactivity,c),null!==c.refreshCallbackUrl&&r(d,"keepalive.wb-session-timeout",c.sessionalive,c)},o=function(c){var d=a(this),e=d.data();c.preventDefault(),a.magnificPopup.close(),void 0!==e.start&&s()-e.start<=e.reactionTime?a(g).trigger("reset.wb-session-timeout",e).trigger("keepalive.wb-session-timeout",e):b.location.href=e.logouturl},p=function(b,c){a.magnificPopup.open({modal:!0,mainClass:null==c.mainClass?"mfp":c.mainClass,removalDelay:null==c.removalDelay?0:c.removalDelay,items:c.items,callbacks:c.callbacks})},q=function(b){var c=a("<div class='wb-modal mfp-anim'><div class='body' id='lb-desc'>"+b.content+"</div></div>");return null!=b.id&&c.attr("id",b.id),null!=b.title&&(c.prepend("<p class='lead' id='lb-title'>"+b.title+"</p>"),c.attr("aria-labelledby","lb-title")),c.attr({role:"alertdialog","aria-live":"polite","aria-describedby":"lb-desc"}),c.append(b.buttons),c},r=function(a,b,c,d){clearTimeout(a.data(b)),a.data(b,setTimeout(function(){a.trigger(b,d)},t(c)))},s=function(){return(new Date).getTime()},t=function(b){var c,d,e,f={ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6};return null==b?null:(c=/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/.exec(a.trim(b.toString())),c[2]?(d=parseFloat(c[1]),e=f[c[2]]||1,d*e):b)},u=function(a){var b={minutes:"",seconds:""};return null!=a&&(b.minutes=parseInt(a/6e4%60,10),b.seconds=parseInt(a/1e3%60,10)),b},v=function(a,b){var c=parseInt(a.text(),10),d=parseInt(b.text(),10);return d>0?d-=1:c>0&&(c-=1,d=59),a.text(c),b.text(d),0===c&&0===d};h.on("timerpoke.wb keepalive.wb-session-timeout inactivity.wb-session-timeout reset.wb-session-timeout",g,function(a,b){var c=a.type;switch(c){case"timerpoke":j(a);break;case"keepalive":l(a,b);break;case"inactivity":m(a,b);break;case"reset":n(a,b)}}),h.on("click",".wb-session-timeout-confirm",o),h.on("modal.wb-session-timeout",p),b._timer.add(g)}(jQuery,window,document,vapour),function(a,b,c,d){"use strict";var e=".wb-texthighlight",f=d.doc,g=function(a){b._timer.remove(e);var c,f=d.pageUrlParts.params.texthighlight;f&&(f=f.replace(/^\s+|\s+$|\|+|\"|\(|\)/g,"").replace(/\++/g,"|"),f=decodeURIComponent(f),f="(?=([^>]*<))([\\s'])?("+f+")(?!>)",c=a.html().replace(new RegExp(f,"gi"),function(a,b,c,d){return(c?c:"")+"<span class='texthighlight'><mark>"+d+"</mark></span>"}),a.html(c))};f.on("timerpoke.wb",e,function(){return g(a(this)),!0}),b._timer.add(e)}(jQuery,window,document,vapour),function(a,b,c){"use strict";var d=".wb-toggle",e=c.doc,f={},g="on",h="off",i=function(c){var d=a(c.target),e=d.data("selector");b._timer.remove(e),e?d.trigger("ariaControls.wb-toggle",{selector:e,parent:d.data("parent")}):a.error(".wb-toggle: you must specify a [data-selector] attribute with the CSS selector of the element(s) the toggle link controls.")},j=function(b,c){var d,e,f,g=void 0!==c.parent?a(c.parent).find(c.selector):a(c.selector),h="",i=b.target;for(e=0,f=g.length;f>e;e++)d=g.eq(e),void 0===d.attr("id")&&d.attr("id","wb-toggle_"+e),h+=d.attr("id")+" ";i.setAttribute("aria-controls",h.slice(0,-1))},k=function(b){var c=b.target,d=a(c);d.trigger("toggle.wb-toggle",{selector:d.data("selector"),parent:d.data("parent"),type:d.data("type")}),b.preventDefault(),a(c).trigger("focus.wb")},l=function(b,c){var d=void 0!==c.parent?a(c.parent).find(c.selector):a(c.selector),e=m(c.selector,c.parent,c.type),f=e===g?h:g;d.wb("toggle",f,e),n(c.selector,c.parent,f)},m=function(a,b,c){return c?c===g?h:g:f.hasOwnProperty(a)?f[a].hasOwnProperty(b)?f[a][b]:f[a].all:h},n=function(a,b,c){var d;if(c[a]||(c[a]={all:h}),b)c[a][b]=c;else for(d in c[a])c[a].hasOwnProperty(d)&&(c[a][d]=c)};e.on("timerpoke.wb ariaControls.wb-toggle toggle.wb-toggle click",d,function(a,b){var c=a.type;switch(c){case"click":k(a);break;case"toggle":l(a,b);break;case"ariaControls":j(a,b);break;case"timerpoke":i(a)}}),b._timer.add(d)}(jQuery,window,vapour),function(a,b,c){"use strict";a.ajaxSettings.cache=!1;var d,e,f=".wb-webfeeds",g=c.doc,h={_parse_entries:function(a,b,c){var d=a[1],e="<li><a href='"+d.link+"'>"+d.title+"</a> <span class='widget-datestamp'>["+o(d.publishedDate,!0)+"]</span></li>";return c.empty().append(e)},_map_entries:function(a){return a.responseData.feed.entries},_json_request:function(a,b){var c="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(decodeURIComponent(a.replace(/^.*?\.gc\.ca\/([a-z]+).+\/(.*?)_[a-z]+_([ef])\.html/i,"http://weather.gc.ca/rss/$1/$2_$3.xml")));return b>0&&(c+="&num="+b),c}},i={_parse_entries:function(a,b,c){var d,e,f,g=b>0&&b<a.length?b:a.length,h="";for(e=a.sort(function(a,b){return n(b.publishedDate,a.publishedDate)}),d=0;d!==g;d+=1)f=e[d],h+="<li><a href='"+f.link+"'>"+f.title+"</a>"+(""!==f.publishedDate?" <span class='widget-datestamp'>["+o(f.publishedDate,!0)+"]</span>":"")+"</li>";return c.empty().append(h)},_map_entries:function(a){return a.responseData.feed.entries},_json_request:function(a,b){var c="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(decodeURIComponent(a));return b>0&&(c+="&num="+b),c}},j=function(g,j){var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;if(b._timer.remove(f),e||(d=b.i18n,e={loading:d("%loading")}),o=k(g),n=j.find("a").map(function(){var a=this.href;return!A&&/twitter.com/i.test(a)&&(A="twitter"),!A&&/weather.gc.ca/i.test(a)&&(A="weather"),A||(A="rss"),a}),z="twitter"===A?"a":"li",l=a("<"+z+" class='widget-state-loading'><img src='assets/ajax-loader.gif' alt='"+e.loading+"' /></"+z+">"),m=j.find(".widget-content, .twitter-timeline"),m.append(l),"twitter"!==A){for(p="rss"===A?i:h,s=n.length-1,q=[],u=p._parse_entries,r=s,v=[],t=function(a){var b,c;for(a=p._map_entries(a),c=a.length,b=0;b!==c;b+=1)q.push(a[b]);return s||u(q,o,m),s-=1},w=function(){l.remove(),m.find("li").show()},x=[];r>=0;)x[r]=a.ajax({url:p._json_request(n[r],o),dataType:"json",timeout:1e3}).done(t),v.push(r-=1);a.when.apply(null,x).always(w),a.extend({},v)}else y=c.pageUrlParts.protocol,b.Modernizr.load({load:(-1===y.indexOf("http")?"http":y)+"://platform.twitter.com/widgets.js"})},k=function(a){var b=a.className.match(/\blimit-\d+/);return b?Number(b[0].replace(/limit-/i,"")):0},l=function(a,b){for(var c=String(a);c.length<b;)c="0"+c;return c},m=function(a){return a.constructor===Date?a:a.constructor===Array?new Date(a[0],a[1],a[2]):a.constructor===Number||a.constructor===String?new Date(a):"object"==typeof a?new Date(a.year,a.month,a.date):0/0},n=function(a,b){return isFinite(a=m(a).valueOf())&&isFinite(b=m(b).valueOf())?(a>b)-(b>a):0/0},o=function(a,b){var c=m(a);return b?c.getFullYear()+"-"+l(c.getMonth()+1,2,"0")+"-"+l(c.getDate(),2,"0")+" "+l(c.getHours(),2,"0")+":"+l(c.getMinutes(),2,"0"):c.getFullYear()+"-"+l(c.getMonth()+1,2,"0")+"-"+l(c.getDate(),2,"0")};g.on("timerpoke.wb",f,function(){return j(this,a(this)),!0}),b._timer.add(f)}(jQuery,window,vapour);